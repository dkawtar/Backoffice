{% extends "BackBundle::layout.html.twig" %}{#Include CSS#}  {% block stylesheets %}      {{ parent() }}      {% stylesheets      'bundles/back/css/tables.css'      'bundles/back/css/style.css'      filter='cssrewrite' %}      <link rel="stylesheet" href="{{ asset_url }}"/>      {% endstylesheets %}      <style type="text/css">            </style>  {% endblock stylesheets %}    {% block title %}    Liste de clients | {{ parent() }}{% endblock %}{# HEADER #}    {% block header_breadcrumb %}        <li>            <span>Liste de clients</span>        </li>    {% endblock header_breadcrumb %}{% block action_toolbar %}    {#<div class="btn-group pull-right">        <button type="button" class="btn green btn-sm btn-outline dropdown-toggle"                data-toggle="dropdown"> Actions            <i class="fa fa-angle-down"></i>        </button>        <ul class="dropdown-menu pull-right" role="menu">            <li>                <a href="{{ path('back_customer_list') }}">                    <i class="icon-list"></i> Liste de clients</a>            </li>            <li>                <a href="{{ path('back_customer_add') }}">                    <i class="icon-shield"></i> Ajout un client</a>            </li>            <li class="divider"></li>            <li>                <a href="#">                    <i class="icon-bag"></i> Autres</a>            </li>        </ul>    </div>#}{% endblock action_toolbar %}    {#{% block page_title %}Clients{% endblock page_title %}#}    {#{% block page_sub_title %}#}        {#<small>Liste</small>{% endblock page_sub_title %}#}{% block back_body %}    <div class="row" id="">        <div class="col-md-12 col-sm-12 margin-top-20">            <!-- BEGIN Portlet PORTLET-->            <div class="portlet">                <div class="portlet-title">                    <div class="caption font-green-sharp">                        <i class="icon-user font-green-sharp"></i>                        <span class="caption-subject bold uppercase"> Clients</span>                        {% if customers is defined %}                            <span class="caption-helper">  Total: {{ customers.getTotalItemCount }}</span>                        {% endif %}                    </div>                    <div class="actions">                        <a href="{{ path('back_customer_add') }}" title="Ajouter un customer"                           class="btn btn-sm btn-block green btn-outline"><span class="fa fa-plus"></span> Ajouter un                            client</a>                    </div>                </div>                <div class="portlet-body">                    {% include('BackBundle:Includes:alert.html.twig') %}                    <div class="row">                        <!-- BEGIN Row-->                        <div class="col-sm-12">                            <div class="row">                                {% if customers is defined and customers %}                                    <div class="col-sm-2">                                        <div class="form-group">                                            <select class="form-control input-sm"                                                    onchange="location = this.value;">                                                <option value="" disabled>Trier par</option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.id','direction':'asc' })) }}"                                                        {% if customers.isSorted('customer.id') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>ID croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.id','direction':'desc' })) }}"                                                        {% if (customers.isSorted('customer.id') and  customers.getDirection() =="desc") or                                                        ( not customers.isSorted('customer.id') and not customers.isSorted('customer.lastName') and                                                        not customers.isSorted('customer.firstName') and                                                        not customers.isSorted('company.name') and                                                        not customers.isSorted('customer.create') ) %}                                                        {# and not customers.isSorted('customer.lastName') and not customers.isSorted('customer.lastName')                                                        #}                                                    selected="selected"                                                        {% endif %}>ID décroissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.lastName','direction':'asc' })) }}"                                                        {% if customers.isSorted('customer.lastName') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Nom croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.lastName','direction':'desc' })) }}"                                                        {% if customers.isSorted('customer.lastName') and  customers.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Nom décroissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.firstName','direction':'asc' })) }}"                                                        {% if customers.isSorted('customer.firstName') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Prénom croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.firstName','direction':'desc' })) }}"                                                        {% if customers.isSorted('customer.firstName') and  customers.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Prénom décroissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'company.name','direction':'asc' })) }}"                                                        {% if customers.isSorted('company.name') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Société croissante                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'company.name','direction':'desc' })) }}"                                                        {% if customers.isSorted('company.name') and  customers.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Société décroissante                                                </option>                                            </select>                                        </div>                                    </div>                                {% endif %}                                {% if pageLimited is defined and pageLimited %}                                    <div class="col-lg-2 col-md-2 col-sm-5 col-xs-12">                                        <div class="form-group">                                            {% set selected = app.request.query.get("limit") %}                                            <select name="limit" class="form-control input-sm"                                                    onchange="location = this.value;" autocomplete="off">                                                {#<option disabled {% if selected is null %}selected{% endif %}>#}                                                {#Nombre d'affichage#}                                                {#</option>#}                                                {% for limit in pageLimited %}                                                    <option value="{{ path(app.request.attributes.get('_route'),                                                    app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                    merge({'limit': limit })) }}"                                                            {% if limit == selected %}selected{% endif %}>{{ limit }}                                                        par page                                                    </option>                                                {% endfor %}                                            </select>                                        </div>                                    </div>                                {% endif %}                                {#<div class="col-lg-2 col-md-2">#}                                {#{% if (app.request.query.get("sex")  or  app.request.query.get("q")) %}#}                                {#<a href="{{ path("back_customer_list") }}#}                                {#" class="btn btn-sm btn-block red">Réinitialiser le filtre</a>#}                                {#{% endif %}#}                                {#</div>#}                                <form class="search-form" role="search" method="get"                                      action="{{ path(app.request.attributes.get('_route')) }}">                                    <div class="col-lg-3 col-sm-3 col-xs-12 pull-right">                                        <div class="input-group">                                            <input class="form-control input-sm" placeholder="Rechercher..."                                                   name="q" value="{{ app.request.get('q') }}">                                            <span class="input-group-btn">                                                <button type="submit" class="btn green btn-sm"><i                                                            class="icon-magnifier"></i></button>                                            </span>                                        </div>                                    </div>                                </form>                            </div>                        </div>                        {% if customers is defined and customers %}                            <div class="col-sm-12">                                <table class="table table-condensed table-hover">                                    <thead>                                    <tr>                                        <th {% if customers.isSorted('customer.id') %} class="sorted"{% endif %}                                                width="5%" ;>                                            {{ knp_pagination_sortable(customers, 'ID', 'customer.id') }}                                            {% if customers.isSorted('customer.id') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('customer.lastName') %} class="sorted col-sm-1"{% else %} class="col-sm-1" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Nom', 'customer.lastName') }}                                            {% if customers.isSorted('customer.lastName') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('customer.firstName') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Prénom', 'customer.firstName') }}                                            {% if customers.isSorted('customer.firstName') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th class="col-sm-1 text-center">Image</th>                                        <th {% if customers.isSorted('company.name') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Société', 'company.name') }}                                            {% if customers.isSorted('company.name') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('commercial.lastName') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Commercial', 'commercial.lastName') }}                                            {% if customers.isSorted('commercial.lastName') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('customer.created') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Création', 'customer.created') }}                                            {% if customers.isSorted('customer.created') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th class="col-sm-2 text-center">Actions</th>                                    </tr>                                    </thead>                                    <tbody>                                    {% for customer in customers %}                                        <tr id="line_customer_{{ customer.id }}">                                            <td class="customer_id">{{ customer.id | e }}</td>                                            <td class="customer_last_name">{{ customer.lastName | upper | e }}</td>                                            <td class="customer_first_name">{{ customer.firstName | e }}</td>                                            <td class="td-image text-center customer_img">                                                {% if customer.image is defined and customer.image %}                                                    <img src="{{ asset(customer.image) }}"                                                         alt="{{ customer.firstName | e }} {{ customer.lastName }}"                                                         class="customer_image"                                                         title="{{ customer.firstName | e }} {{ customer.lastName }}">                                                {% else %}                                                    <img src="{{ asset('assets/img/default.png') }}"                                                         class="customer_image"                                                         alt="{{ customer.firstName | e }} {{ customer.lastName }}"                                                         title="{{ customer.firstName | e }} {{ customer.lastName }}">                                                {% endif %}                                            </td>                                            <td class="customer_company"                                                    {% if customer.company %}                                                        data-name="{{ customer.company.name }}"                                                        data-representative="{{ customer.company.lastNameRepresentative | upper | e }} {{ customer.company.firstNameRepresentative | capitalize | e }} "                                                        data-email="{{ customer.company.email }}"                                                        data-siret="{{ customer.company.siret }}"                                                        data-address="{{ customer.company.address |e }}, {{ customer.company.additionalAddress |e }}"                                                        data-country="{{ customer.company.city |e }} ({{ customer.company.postalCode |e }}) - {{ customer.company.country |upper }}  "                                                        data-phone="{{ customer.company.phone |e }}"                                                        data-mobile="{{ customer.company.mobile |e }}"                                                    {% endif %}                                            >                                                {% if customer.company.name is defined and customer.company.name %}                                                    {{ customer.company.name }}                                                {% else %}                                                    --                                                {% endif %}                                            </td>                                            <td class="customer_commercial"                                                    {% if customer.commercial %}                                                        data-name="{{ customer.commercial.lastName | upper | e }} {{ customer.commercial.firstName | capitalize | e }} "                                                        data-email="{{ customer.commercial.email }}"                                                        data-phone="{{ customer.commercial.phone }}"                                                    {% endif %}                                            >                                                {% if customer.commercial.lastName is defined and customer.commercial.lastName %}                                                    {{ customer.commercial.lastName | upper | e }}                                                {% endif %}                                                {% if customer.commercial.firstName is defined and customer.commercial.firstName %}                                                    {{ customer.commercial.firstName | capitalize | e }}                                                {% endif %}                                            </td>                                            <td class="customer_created">{{ customer.created | date("d/m/Y") }}</td>                                            <td class="col-sm-1 text-center">                                                <button                                                        data-toggle="modal"                                                        data-target="#modal_view"                                                        class="btn btn-xs green btn-outline btn_detail"                                                        data-id="customer_{{ customer.id }}"                                                        data-email="{{ customer.email }}"                                                        data-phone="{{ customer.phone }}"                                                ><i class="fa fa-eye"></i>                                                </button>                                                <a href="{{ path('back_customer_edit', {'slug':customer.slug}) }}"                                                   class="btn btn-xs blue btn-outline link_edit"><i                                                            class="fa fa-edit"></i></a>                                                <button                                                        data-toggle="modal"                                                        data-target="#modal_remove"                                                        class="btn btn-xs red btn-outline btn_remove"                                                        data-title="{{ customer.lastName | upper| e }} {{ customer.firstName }}"                                                        data-id="customer_{{ customer.id }}"                                                ><i class="fa fa-trash-o"></i></button>                                            </td>                                        </tr>                                    {% else %}                                        <tr class="text-center">                                            <td colspan="7"><h4 class="margin-top-20">Aucune donnée trouvée.</h4></td>                                        </tr>                                    {% endfor %}                                    </tbody>                                </table>                                <div class="text-center">                                    {{ knp_pagination_render(customers) }}                                </div>                            </div>                        {% endif %}                        {#{{ dump(customers) }}#}                        <!-- End Row-->                    </div>                </div>            </div>        </div>    </div>    <div class="modal fade" tabindex="-1" id="modal_remove" role="dialog"         data-attention-animation="false">        <div class="modal-dialog" role="document">            <!-- Modal content-->            <div class="modal-content">                <div class="modal-header bg-red bg-font-red">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title red"><i class="fa fa fa-trash-o"></i> Suppression Client </h4>                </div>                <div class="modal-body">                    <h5 style="font-size: 16px;">Vous voulez vraiment supprimer ce client (<b class="customer_name"></b>)?                    </h5>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-outline btn-default" data-dismiss="modal"><i                                class="fa fa-remove fa-fw"></i>Non                    </button>                    <button type="button" class="btn btn-danger btn_remove_ok" data-dismiss="modal">                        <i class="fa fa-check fa-fw"></i>Oui                    </button>                </div>            </div>        </div>    </div>    <div class="modal fade" tabindex="-1" id="modal_view" role="dialog"         data-attention-animation="false">        <div class="modal-dialog" role="document">            <!-- Modal content-->            <div class="modal-content">                <div class="modal-header bg-green bg-font-green">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title ">                        <i class="icon-user"></i> Fiche client </h4>                </div>                <div class="modal-body">                    <div class="row">                        <div class="col-sm-9">                            {#<div class="row">#}                            <div class="col-sm-12">                                <h4 class="title-header">Client</h4>                            </div>                            <div class="col-sm-12">                                <i class="fa fa-user"></i> <span class="name"></span>                            </div>                            <div class="col-sm-12">                                <i class="fa fa-envelope"></i> <span class="email"></span>                            </div>                            <div class="col-sm-12">                                <i class="fa fa-phone"></i> <span class="phone"></span>                            </div>                            <div class="col-sm-12 ">                                <i class="fa fa-calendar-plus-o"></i> <span                                        class="create"></span>                            </div>                            {#<div class="col-sm-12"><i class="fa fa-calendar-check-o"></i> Date mise à jour:</div>#}                            {#</div>#}                            {#<div class="row">#}                            <div class="col-sm-12">                                <h4 class="title-header">Société</h4>                            </div>                            <div class="col-sm-12"><i class="fa fa-building"></i> <span class="company_name"></span>                            </div>                            <div class="col-sm-12"><i class="fa fa-user"></i> <span class="representative"></span>                            </div>                            <div class="col-sm-12"><i class="fa fa-envelope"></i> <span                                        class="company_email"></span></div>                            <div class="col-sm-12"><i class="fa fa-key"></i> <span class="company_siret"></span>                            </div>                            <div class="col-sm-12"><i class="fa fa-map-pin"></i> <span                                        class="company_address"></span></div>                            <div class="col-sm-12"><i class="fa fa-globe"></i> <span class="company_country"></span>                            </div>                            <div class="col-sm-12"><i class="fa fa-phone"></i> <span class="company_phone"></span>                            </div>                            <div class="col-sm-12"><i class="fa fa-mobile"></i> <span class="company_mobile"></span>                            </div>                            {#</div>#}                            {#<div class="row">#}                            <div class="col-sm-12">                                <h4 class="title-header">Commercial</h4>                            </div>                            <div class="col-sm-12"><i class="fa fa-user"></i> <span class="commercial_name"></span>                            </div>                            <div class="col-sm-12"><i class="fa fa-envelope"></i> <span                                        class="commercial_email"></span></div>                            <div class="col-sm-12"><i class="fa fa-phone"></i> <span                                        class="commercial_phone"></span></div>                            {#</div>#}                        </div>                        <div class="col-sm-3 ">                            <img src="{{ asset('assets/img/default.png') }}"                                 class="img-responsive img-thumbnail customer_image" alt="img">                        </div>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-outline btn-default" data-dismiss="modal"><i                                class="fa fa-remove fa-fw"></i>Fermer                    </button>                    <a href="javascript:;" class="btn btn-primary btn_edit btn_edit">                        <i class="fa fa-edit fa-fw"></i>Modifier                    </a>                </div>            </div>        </div>    </div>{% endblock back_body %}{% block javascripts %}    {{ parent() }}    {% javascripts    "bundles/back/js/customer/list.js" %}    <script src="{{ asset_url }}"></script>    {% endjavascripts %}{% endblock %}