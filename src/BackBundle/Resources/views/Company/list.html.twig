{% extends "BackBundle::layout.html.twig" %}{#Include CSS#}  {% block stylesheets %}      {{ parent() }}      {% stylesheets      'bundles/back/css/tables.css'      filter='cssrewrite' %}      <link rel="stylesheet" href="{{ asset_url }}"/>      {% endstylesheets %}  {% endblock stylesheets %}{% block title %}    Liste des sociétés | {{ parent() }}{% endblock %}{# HEADER #}    {% block header_breadcrumb %}        <li>            <span>Liste des sociétés</span>        </li>    {% endblock header_breadcrumb %}{% block action_toolbar %}    <div class="btn-group pull-right">        <button type="button" class="btn green btn-sm btn-outline dropdown-toggle"                data-toggle="dropdown"> Actions            <i class="fa fa-angle-down"></i>        </button>        <ul class="dropdown-menu pull-right" role="menu">            <li>                <a href="#">                    <i class="icon-bell"></i> Liste des sociétés</a>            </li>            <li>                <a href="#">                    <i class="icon-shield"></i> Ajout une société</a>            </li>            <li class="divider"></li>            <li>                <a href="#">                    <i class="icon-bag"></i> test</a>            </li>        </ul>    </div>{% endblock action_toolbar %}    {% block page_title %}Commercial{% endblock page_title %}    {% block page_sub_title %}        <small>Liste</small>{% endblock page_sub_title %}{% block back_body %}    <div class="row" id="">        <div class="col-md-12 col-sm-12 margin-top-20">            <!-- BEGIN Portlet PORTLET-->            <div class="portlet">                <div class="portlet-title">                    <div class="caption font-green-sharp">                        <i class="icon-earphones-alt font-green-sharp"></i>                        <span class="caption-subject bold uppercase"> Société</span>                        {% if companies is defined %}                            <span class="caption-helper"> ( Total: {{ companies.getTotalItemCount }})</span>                        {% endif %}                    </div>                    <div class="actions">                        <a href="{{ path('back_commercial_add') }}" title="Ajouter un commercial"                           class="btn btn-sm btn-block green btn-outline"><span class="fa fa-plus"></span> Ajouter un                            commercial</a>                    </div>                </div>                <div class="portlet-body">                    {% include('BackBundle:Includes:alert.html.twig') %}                    <div class="row">                        <!-- BEGIN Row-->                        <div class="col-sm-12">                            <div class="row">                                {% if companies is defined and companies %}                                    <div class="col-sm-2">                                        <div class="form-group">                                            <select class="form-control input-sm"                                                    onchange="location = this.value;">                                                <option value="" selected disabled>Trier par</option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'company.name','direction':'asc' })) }}"                                                        {% if companies.isSorted('company.name') and  companies.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Nom croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'company.name','direction':'desc' })) }}"                                                        {% if companies.isSorted('company.name') and  companies.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Nom décroissant                                                </option>                                                {#<option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|#}                                                {#merge({'sort': 'company.name','direction':'asc' })) }}"#}                                                {#{% if companies.isSorted('company.name') and  companies.getDirection() =="asc" %}#}                                                {#selected="selected"#}                                                {#{% endif %}>Prenom croissant#}                                                {#</option>#}                                                {#<option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|#}                                                {#merge({'sort': 'company.name','direction':'desc' })) }}"#}                                                {#{% if companies.isSorted('company.name') and  companies.getDirection() =="desc" %}#}                                                {#selected="selected"#}                                                {#{% endif %}>Prenom décroissant#}                                                {#</option>#}                                            </select>                                        </div>                                    </div>                                {% endif %}                                {% if pageLimited is defined and pageLimited %}                                    <div class="col-lg-2 col-md-2 col-sm-5 col-xs-12">                                        <div class="form-group">                                            {% set selected = app.request.query.get("limit") %}                                            <select name="limit" class="form-control input-sm"                                                    onchange="location = this.value;" autocomplete="off">                                                {#<option disabled {% if selected is null %}selected{% endif %}>#}                                                {#Nombre d'affichage#}                                                {#</option>#}                                                {% for limit in pageLimited %}                                                    <option value="{{ path(app.request.attributes.get('_route'),                                                    app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                    merge({'limit': limit })) }}"                                                            {% if limit == selected %}selected{% endif %}>{{ limit }}                                                        par page                                                    </option>                                                {% endfor %}                                            </select>                                        </div>                                    </div>                                {% endif %}                                {#<div class="col-lg-2 col-md-2">#}                                {#{% if (app.request.query.get("sex")  or  app.request.query.get("q")) %}#}                                {#<a href="{{ path("back_commercial_list") }}#}                                {#" class="btn btn-sm btn-block red">Réinitialiser le filtre</a>#}                                {#{% endif %}#}                                {#</div>#}                                <form class="search-form" role="search" method="get"                                      action="{{ path(app.request.attributes.get('_route')) }}">                                    <div class="col-lg-3 col-sm-3 col-xs-12 pull-right">                                        <div class="input-group">                                            <input class="form-control input-sm" placeholder="Rechercher..."                                                   name="q" value="{{ app.request.get('q') }}">                                            <span class="input-group-btn">                                                <button type="submit" class="btn green btn-sm"><i                                                            class="icon-magnifier"></i></button>                                            </span>                                        </div>                                    </div>                                </form>                            </div>                        </div>                        {% if companies is defined and companies %}                            <div class="col-sm-12">                                <table class="table table-condensed table-hover">                                    <thead>                                    <tr>                                        <th {% if companies.isSorted('company.id') %} class="sorted col-sm-1"{% else %} class="col-sm-1" {% endif %} >                                            {{ knp_pagination_sortable(companies, 'ID', 'company.id') }}                                            {% if companies.isSorted('company.id') %}                                                {% if companies.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif companies.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if companies.isSorted('company.name') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(companies, 'Société', 'company.name') }}                                            {% if companies.isSorted('company.name') %}                                                {% if companies.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif companies.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if companies.isSorted('company.email') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(companies, 'Mail', 'company.email') }}                                            {% if companies.isSorted('company.email') %}                                                {% if companies.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif companies.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if companies.isSorted('company.phone') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(companies, 'Télépone', 'company.phone') }}                                            {% if companies.isSorted('company.phone') %}                                                {% if companies.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif companies.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        {#<th class="col-sm-1 text-center">SIRET</th>#}                                        <th class="col-sm-2 text-center">Image</th>                                        <th class="col-sm-2 text-center">Actions</th>                                    </tr>                                    </thead>                                    <tbody>                                    {% for company in companies %}                                        <tr id="line_commercial_{{ company.id }}">                                            <td>{{ company.id }}</td>                                            <td>{{ company.name }}</td>                                            <td>{{ company.email }}</td>                                            {#<td>{{ company.siret }}</td>#}                                            <td>{{ company.phone }}</td>                                            <td class="td-image text-center">                                                {% if company.image is defined and company.image %}                                                    <img src="{{ asset(company.image) }}"                                                         alt="{{ company.name | e }} "                                                         title="{{ company.name | e }} ">                                                {% else %}                                                    <img src="{{ asset('assets/img/no_image_landscape.png') }}"                                                         alt="{{ company.name | e }} "                                                         title="{{ company.name | e }}">                                                {% endif %}                                            </td>                                            <td class="text-center">                                                <a href="" class="btn btn-xs blue btn-outline"><i                                                            class="fa fa-info"></i> Voir</a>                                                <a href="{{ path('back_company_edit', {'slug':company.slug}) }}"                                                   class="btn btn-xs green btn-outline"> <i                                                            class="fa fa-edit"></i> Edit</a>                                                <a href="" class="btn btn-xs red btn-outline btn_remove"                                                   data-toggle="modal"                                                   data-title="{{ company.name | e }}"                                                   data-id="commercial_{{ company.id }}"                                                ><i class="fa fa-trash"></i> Supp</a>                                            </td>                                        </tr>                                    {% else %}                                        <tr class="text-center">                                            <td colspan="7"><h4 class="margin-top-20">Aucune donnée trouvé.</h4></td>                                        </tr>                                    {% endfor %}                                    </tbody>                                </table>                                <div class="text-center">                                    {{ knp_pagination_render(companies) }}                                </div>                            </div>                        {% endif %}                        <!-- End Row-->                    </div>                </div>            </div>        </div>    </div>    <div class="modal fade" tabindex="-1" id="remove_modal" role="dialog"         data-attention-animation="false">        <div class="modal-dialog" role="document">            <!-- Modal content-->            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title red">Suppression commerciale </h4>                </div>                <div class="modal-body">                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-outline btn-default" data-dismiss="modal"><i                                class="fa fa-remove fa-fw"></i>Non                    </button>                    <button type="button" class="btn btn-danger btn-ok-delete" data-dismiss="modal">                        <i class="fa fa-trash-o fa-fw"></i>Oui                    </button>                </div>            </div>        </div>    </div>{% endblock back_body %}{% block javascripts %}    {{ parent() }}    <script type="text/javascript">        $(function () {            $("table.table thead tr th").click(function (e) {                var href = $(this).find("a").attr("href");                if (href) {                    location.href = href;                }            })        });    </script>{% endblock %}