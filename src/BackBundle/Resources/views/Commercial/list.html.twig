{% extends "BackBundle::layout.html.twig" %}{#Include CSS#}  {% block stylesheets %}      {{ parent() }}      {% stylesheets      'bundles/back/css/tables.css'      'bundles/back/css/style.css'      filter='cssrewrite' %}      <link rel="stylesheet" href="{{ asset_url }}"/>      {% endstylesheets %}  {% endblock stylesheets %}{% block title %}    Liste des commerciaux | {{ parent() }}{% endblock %}{# HEADER #}    {% block header_breadcrumb %}        <li>            <span>Liste des commerciaux</span>        </li>    {% endblock header_breadcrumb %}{% block action_toolbar %}    <div class="btn-group pull-right">        <button type="button" class="btn green btn-sm btn-outline dropdown-toggle"                data-toggle="dropdown"> Actions            <i class="fa fa-angle-down"></i>        </button>        <ul class="dropdown-menu pull-right" role="menu">            <li>                <a href="{{ path('back_commercial_list') }}">                    <i class="icon-list"></i> Liste des commerciaux</a>            </li>            <li>                <a href="{{ path('back_commercial_add') }}">                    <i class="icon-shield"></i> Ajout un commercant</a>            </li>            <li class="divider"></li>            <li>                <a href="#">                    <i class="icon-info"></i> Autres</a>            </li>        </ul>    </div>{% endblock action_toolbar %}    {% block page_title %}Commercial{% endblock page_title %}    {% block page_sub_title %}        <small>Liste</small>{% endblock page_sub_title %}{% block back_body %}    <div class="row" id="">        <div class="col-md-12 col-sm-12 margin-top-20">            <!-- BEGIN Portlet PORTLET-->            <div class="portlet">                <div class="portlet-title">                    <div class="caption font-green-sharp">                        <i class="icon-earphones-alt font-green-sharp"></i>                        <span class="caption-subject bold uppercase"> Commerciaux</span>                        {% if commercials is defined %}                            <span class="caption-helper"> Total: {{ commercials.getTotalItemCount }}</span>                        {% endif %}                    </div>                    <div class="actions">                        <a href="{{ path('back_commercial_add') }}" title="Ajouter un commercial"                           class="btn btn-sm btn-block green btn-outline"><span class="fa fa-plus"></span> Ajouter un                            commercial</a>                    </div>                </div>                <div class="portlet-body">                    {% include('BackBundle:Includes:alert.html.twig') %}                    <div class="row">                        <!-- BEGIN Row-->                        <div class="col-sm-12">                            <div class="row">                                {% if commercials is defined and commercials %}                                    <div class="col-sm-2">                                        <div class="form-group">                                            <select class="form-control input-sm"                                                    onchange="location = this.value;">                                                <option value="" disabled>Trier par</option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'commercial.id','direction':'asc' })) }}"                                                        {% if commercials.isSorted('commercial.id') and  commercials.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>ID croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'commercial.id','direction':'desc' })) }}"                                                        {% if (commercials.isSorted('commercial.id') and  commercials.getDirection() =="desc") or                                                        ( not commercials.isSorted('commercial.id') and not commercials.isSorted('commercial.lastName') and                                                        not commercials.isSorted('commercial.firstName') and                                                        not commercials.isSorted('company.name') and                                                        not commercials.isSorted('commercial.create') ) %}                                                    selected="selected"                                                        {% endif %}>ID décroissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'commercial.lastName','direction':'asc' })) }}"                                                        {% if commercials.isSorted('commercial.lastName') and  commercials.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Nom croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'commercial.lastName','direction':'desc' })) }}"                                                        {% if commercials.isSorted('commercial.lastName') and  commercials.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Nom décroissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'commercial.firstName','direction':'asc' })) }}"                                                        {% if commercials.isSorted('commercial.firstName') and  commercials.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Prenom croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'commercial.firstName','direction':'desc' })) }}"                                                        {% if commercials.isSorted('commercial.firstName') and  commercials.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Prenom décroissant                                                </option>                                            </select>                                        </div>                                    </div>                                {% endif %}                                {% if pageLimited is defined and pageLimited %}                                    <div class="col-lg-2 col-md-2 col-sm-5 col-xs-12">                                        <div class="form-group">                                            {% set selected = app.request.query.get("limit") %}                                            <select name="limit" class="form-control input-sm"                                                    onchange="location = this.value;" autocomplete="off">                                                {#<option disabled {% if selected is null %}selected{% endif %}>#}                                                {#Nombre d'affichage#}                                                {#</option>#}                                                {% for limit in pageLimited %}                                                    <option value="{{ path(app.request.attributes.get('_route'),                                                    app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                    merge({'limit': limit })) }}"                                                            {% if limit == selected %}selected{% endif %}>{{ limit }}                                                        par page                                                    </option>                                                {% endfor %}                                            </select>                                        </div>                                    </div>                                {% endif %}                                {#<div class="col-lg-2 col-md-2">#}                                {#{% if (app.request.query.get("sex")  or  app.request.query.get("q")) %}#}                                {#<a href="{{ path("back_commercial_list") }}#}                                {#" class="btn btn-sm btn-block red">Réinitialiser le filtre</a>#}                                {#{% endif %}#}                                {#</div>#}                                <form class="search-form" role="search" method="get"                                      action="{{ path(app.request.attributes.get('_route')) }}">                                    <div class="col-lg-3 col-sm-3 col-xs-12 pull-right">                                        <div class="input-group">                                            <input class="form-control input-sm" placeholder="Rechercher..."                                                   name="q" value="{{ app.request.get('q') }}">                                            <span class="input-group-btn">                                                <button type="submit" class="btn green btn-sm"><i                                                            class="icon-magnifier"></i></button>                                            </span>                                        </div>                                    </div>                                </form>                            </div>                        </div>                        {% if commercials is defined and commercials %}                            {#{{ dump(commercials) }}#}                            <div class="col-sm-12">                                <table class="table table-condensed table-hover">                                    <thead>                                    <tr>                                        <th {% if commercials.isSorted('commercial.id') %}class="sorted"{% endif %}                                            width="7%" ;>                                            {{ knp_pagination_sortable(commercials, 'ID', 'commercial.id') }}                                            {% if commercials.isSorted('commercial.id') %}                                                {% if commercials.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif commercials.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if commercials.isSorted('commercial.lastName') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(commercials, 'Nom', 'commercial.lastName') }}                                            {% if commercials.isSorted('commercial.lastName') %}                                                {% if commercials.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif commercials.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if commercials.isSorted('commercial.firstName') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(commercials, 'Prenom', 'commercial.firstName') }}                                            {% if commercials.isSorted('commercial.firstName') %}                                                {% if commercials.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif commercials.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if commercials.isSorted('commercial.created') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(commercials, 'Création', 'commercial.created') }}                                            {% if commercials.isSorted('commercial.created') %}                                                {% if commercials.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif commercials.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th class="col-sm-1 text-center">Image</th>                                        <th class="col-sm-2 text-center">Actions</th>                                    </tr>                                    </thead>                                    <tbody>                                    {% for commercial in commercials %}                                        <tr id="line_commercial_{{ commercial.slug }}">                                            <td class="commercial_id">{{ commercial.id }}</td>                                            <td class="lastName">{{ commercial.lastName }}</td>                                            <td class="firstName">{{ commercial.firstName }}</td>                                            <td class="created">{{ commercial.created | date("d/m/Y") }}</td>                                            <td class="td-image text-center">                                                {% if commercial.image is defined and commercial.image %}                                                    <img src="{{ asset(commercial.image) }}" class="commercial_image"                                                         alt="{{ commercial.firstName | e }} {{ commercial.lastName }}"                                                         title="{{ commercial.firstName | e }} {{ commercial.lastName }}">                                                {% else %}                                                    <img src="{{ asset('assets/img/default.png') }}"                                                         class="commercial_image"                                                         alt="{{ commercial.firstName | e }} {{ commercial.lastName }}"                                                         title="{{ commercial.firstName | e }} {{ commercial.lastName }}">                                                {% endif %}                                            </td>                                            <td class="text-center">                                                <button                                                        data-toggle="modal"                                                        data-target="#modal_view"                                                        class="btn btn-xs green btn-outline btn_detail"                                                        data-id="commercial_{{ commercial.id }}"                                                        data-email="{{ commercial.email }}"                                                        data-phone="{{ commercial.phone }}"                                                        data-slug="{{ commercial.slug }}"                                                        data-update="{{ commercial.updated | date("d/m/Y") }}"                                                ><i                                                            class="fa fa-eye"></i></button>                                                <a href="{{ path('back_commercial_edit', {'slug':commercial.slug}) }}"                                                   class="btn btn-xs blue btn-outline link_edit"><i                                                            class="fa fa-edit"></i></a>                                                <button                                                        data-toggle="modal"                                                        data-target="#modal_remove"                                                        class="btn btn-xs red btn-outline btn_remove"                                                        data-title="{{ commercial.firstName | e }} {{ commercial.lastName }}"                                                        data-slug="{{ commercial.slug }}"                                                ><i class="fa fa-trash"></i></button>                                            </td>                                        </tr>                                    {% else %}                                        <tr class="text-center">                                            <td colspan="7"><h4 class="margin-top-20">Aucune donnée trouvée.</h4></td>                                        </tr>                                    {% endfor %}                                    </tbody>                                </table>                                <div class="text-center">                                    {{ knp_pagination_render(commercials) }}                                </div>                            </div>                        {% endif %}                        <!-- End Row-->                    </div>                </div>            </div>        </div>    </div>    <div class="modal fade" tabindex="-1" id="modal_remove" role="dialog"         data-attention-animation="false">        <div class="modal-dialog" role="document">            <!-- Modal content-->            <div class="modal-content">                <div class="modal-header bg-red bg-font-red">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title red"><i class="fa fa fa-trash-o"></i> Suppression commerciale </h4>                </div>                <div class="modal-body">                    <h5 style="font-size: 16px;">Vous voulez vraiment supprimer ce commercial (<b                                class="commercial_name"></b>)?                    </h5>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-outline btn-default" data-dismiss="modal"><i                                class="fa fa-remove fa-fw"></i>Non                    </button>                    <button type="button" class="btn btn-danger btn_remove_ok" data-dismiss="modal">                        <i class="fa fa-trash-o fa-fw"></i>Oui                    </button>                </div>            </div>        </div>    </div>    <div class="modal fade" tabindex="-1" id="modal_view" role="dialog"         data-attention-animation="false">        <div class="modal-dialog" role="document">            <!-- Modal content-->            <div class="modal-content">                <div class="modal-header bg-green bg-font-green">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title ">                        <i class="icon-earphones-alt"></i> Fiche commerciale </h4>                </div>                <div class="modal-body">                    <div class="row">                        <div class="col-sm-9">                            <div class="col-sm-12">                                <h4 class="title-header">Commercial(e)</h4>                            </div>                            <div class="col-sm-12">                                <i class="fa fa-user"></i> <span class="name"></span>                            </div>                            <div class="col-sm-12">                                <i class="fa fa-envelope"></i> <span                                        class="email"></span>                            </div>                            <div class="col-sm-12">                                <i class="fa fa-phone"></i> <span                                        class="phone"></span>                            </div>                            <div class="col-sm-12"><i class="fa fa-calendar-o"></i> <span class="create"></span></div>                            {#<div class="col-sm-12"><i class="fa fa-calendar-o"></i> <span class="update"></span></div>#}                            {#</div>#}                        </div>                        <div class="col-sm-3 ">                            <img src="{{ asset('assets/img/default.png') }}"                                 class="img-responsive img-thumbnail commercial_image" alt="img">                        </div>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-outline btn-default" data-dismiss="modal"><i                                class="fa fa-remove fa-fw"></i>Fermer                    </button>                    <a href="" class="btn btn-primary btn_edit">                        <i class="fa fa-edit fa-fw"></i>Modifier                    </a>                </div>            </div>        </div>    </div>{% endblock back_body %}{% block javascripts %}    {{ parent() }}    {% javascripts    "bundles/back/js/commercial/list.js" %}    <script src="{{ asset_url }}"></script>    {% endjavascripts %}{% endblock %}