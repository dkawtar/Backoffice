{% extends "BackBundle::layout.html.twig" %}{#Include CSS#}  {% block stylesheets %}      {{ parent() }}      {% stylesheets      'bundles/back/theme/assets/global/plugins/select2/css/select2.min.css'      'bundles/back/theme/assets/global/plugins/select2/css/select2-bootstrap.min.css'      'bundles/back/theme/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css'      'bundles/back/css/style.css'      filter='cssrewrite' %}      <link rel="stylesheet" href="{{ asset_url }}"/>      {% endstylesheets %}      <style type="text/css">      </style>  {% endblock stylesheets %}    {% block title %}    Ajout utilisateur | {{ parent() }}{% endblock %}    {% block header_breadcrumb %}        <li>            <a href="{{ path('back_user_list') }}">Utilisateurs</a>            <i class="fa fa-circle"></i>        </li>        <li>            <span>Ajout</span>        </li>    {% endblock header_breadcrumb %}{% block action_toolbar %}{% endblock action_toolbar %}    {#{% block page_title %}Clients{% endblock page_title %}#}    {#{% block page_sub_title %}#}        {#<small>Liste</small>{% endblock page_sub_title %}#}{% block back_body %}    <div class="row" id="">        <div class="col-md-12 col-sm-12 margin-top-20">            <!-- BEGIN Portlet PORTLET-->            <div class="portlet">                <div class="portlet-title">                    <div class="caption font-green-sharp">                        <i class="icon-user font-green-sharp"></i>                        <span class="caption-subject bold uppercase"> Utilisateur</span>                        <span class="caption-helper"> Ajout</span>                    </div>                    <div class="actions">                        <a href="{{ path('back_user_list') }}" title="Ajouter un customer"                           class="btn btn-sm btn-block green btn-outline"><span class="fa fa-lsit"></span> Liste                            utilisateurs</a>                    </div>                </div>                <div class="portlet-body">                    {% include('BackBundle:Includes:alert.html.twig') %}                    {{ form_start(form, {'attr': {'class':'form-body horizontal-form', 'id': 'form_validation','autocomplete':'off'}}) }}                    <div class="row">                        {% if result is defined %}                            <div class="col-sm-12">                                {% if result == "success" %}                                    <div class="alert alert-success" role="alert">                                        <button type="button" class="close" data-dismiss="alert"                                                aria-hidden="true"></button>                                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>                                        L'utulisateur a été ajouté avec succès .                                    </div>                                {% else %}                                    <div class="alert alert-warning" role="alert">                                        <button type="button" class="close" data-dismiss="alert"                                                aria-hidden="true"></button>                                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>                                        <span class="sr-only">Error:</span>                                        {{ result }}                                    </div>                                {% endif %}                                {% if error is defined and error %}                                    <div class="alert alert-danger" role="alert" style="margin-top: 30px;">                                        <button type="button" class="close" data-dismiss="alert"                                                aria-hidden="true"></button>                                        <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>                                        {{ error | raw }}.                                    </div>                                {% endif %}                            </div>                        {% endif %}                        <div class="col-sm-12">                            <div class="alert alert-danger display-hide">                                <button class="close" data-close="alert"></button>                                <span class="message-error">Veuillez corriger les champs invalides.</span>                            </div>                        </div>                    </div>                    <div class="col-sm-6">                        <div class="form-body">                            <div class="row">                                {% if form.name is defined %}                                    <div class="col-sm-6">                                        <div class="form-group has-feedback" id="field-name">                                            {{ form_label(form.name) }}                                            <div class="input-icon">                                                <i class="fa fa-user"></i>                                                {{ form_widget(form.name) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.firstName is defined %}                                    <div class="col-sm-6">                                        <div class="form-group has-feedback" id="field-firstName">                                            {{ form_label(form.firstName) }}                                            <div class="input-icon">                                                <i class="fa fa-user"></i>                                                {{ form_widget(form.firstName) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.login is defined %}                                    <div class="col-sm-12">                                        {{ form_label(form.login) }}                                    </div>                                    <div class="col-sm-6">                                        <div class="form-group has-feedback" id="field-email">                                            <div class="input-icon">                                                <i class="fa fa-user"></i>                                                {{ form_widget(form.login) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.at is defined %}                                    <div class="col-sm-6">                                        <div class="form-group">                                            <div class="input-icon">                                                <i class="fa fa-at"></i>                                                {{ form_widget(form.at) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.service is defined %}                                    <div class="col-sm-6">                                        <div class="form-group">                                            {{ form_label(form.service) }}                                            {{ form_widget(form.service, {'attr': {'class': 'bs-select form-control service'}}) }}                                        </div>                                    </div>                                {% endif %}                                {% if form.group is defined  and groups is defined %}                                    <div class="col-sm-6">                                        <div class="form-group has-feedback">                                            <label class="control-label">Groupes</label>                                            <select class="bs-select form-control" id="select-group" multiple>                                                {% for  key, tab in groups %}                                                    {% for  group in tab %}                                                        {% if group|length >1 %}                                                            {#{% if  keyUser != "count" or keyUser =="0" %}#}                                                            {% set titre =ad_active_directory.getData(group,"cn") %}                                                            {% set dn =ad_active_directory.getData(group,"distinguishedname") %}                                                            {% set dnGroup = dn |split(','~ad_tree) %}                                                            <option value="{{ attribute(dnGroup,0) }}">{{ titre }}</option>                                                        {% endif %}                                                    {% endfor %}                                                {% endfor %}                                            </select>                                        </div>                                    </div>                                    {{ form_widget(form.group) }}                                {% endif %}                                {% if form.password is defined %}                                    <div class="col-sm-12">                                        <div class="form-group has-feedback" id="field-password">                                            {{ form_label(form.password) }}                                            <div class="input-icon">                                                <i class="fa fa-unlock-alt form-control-feedback"></i>                                                {{ form_widget(form.password) }}                                            </div>                                        </div>                                    </div>                                    <div class="col-sm-12">                                        <div class="form-group has-feedback" id="field-confirm-password">                                            <label for="confirm-password" class="control-label">Confirmation mot de                                                passe</label>                                            <div class="input-icon">                                                <i class="fa fa-unlock-alt form-control-feedback"></i>                                                <input type="password" placeholder="Confirmation mot de passe"                                                       class="form-control confirm-password"                                                       name="confirm-password" autocomplete="off" required>                                            </div>                                        </div>                                    </div>                                {% endif %}                            </div>                        </div>                        <!-- END FORM-->                    </div>                    <div class="col-sm-6">                        <div class="form-body">                            <div class="row">                                {% if form.title is defined %}                                    <div class="col-sm-12">                                        <div class="form-group has-feedback">                                            {{ form_label(form.title) }}                                            <div class="input-icon">                                                <i class="fa fa-graduation-cap"></i>                                                {{ form_widget(form.title) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.description is defined %}                                    <div class="col-sm-12">                                        <div class="form-group has-feedback">                                            {{ form_label(form.description) }}                                            <div class="input-icon">                                                <i class="fa fa-list-alt"></i>                                                {{ form_widget(form.description) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                <div class="col-sm-12">                                    <hr>                                </div>                                {% if form.address is defined %}                                    <div class="col-sm-9">                                        <div class="form-group has-feedback">                                            {{ form_label(form.address) }}                                            <div class="input-icon">                                                <i class="fa fa-building-o"></i>                                                {{ form_widget(form.address) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.postalCode is defined %}                                    <div class="col-sm-3">                                        <div class="form-group has-feedback">                                            {{ form_label(form.postalCode) }}                                            <div class="input-icon">                                                <i class="fa fa-location-arrow"></i>                                                {{ form_widget(form.postalCode) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.city is defined %}                                    <div class="col-sm-6">                                        <div class="form-group has-feedback">                                            {{ form_label(form.city) }}                                            <div class="input-icon">                                                <i class="fa fa-home"></i>                                                {{ form_widget(form.city) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.country is defined %}                                    <div class="col-sm-6">                                        <div class="form-group has-feedback">                                            {{ form_label(form.country) }}                                            <div class="input-icon">                                                <i class="fa fa-globe"></i>                                                {{ form_widget(form.country) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.phone is defined %}                                    <div class="col-sm-6">                                        <div class="form-group has-feedback">                                            {{ form_label(form.phone) }}                                            <div class="input-icon">                                                <i class="fa fa-phone"></i>                                                {{ form_widget(form.phone) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                {% if form.mobile is defined %}                                    <div class="col-sm-6">                                        <div class="form-group has-feedback">                                            {{ form_label(form.mobile) }}                                            <div class="input-icon">                                                <i class="fa fa-mobile"></i>                                                {{ form_widget(form.mobile) }}                                            </div>                                        </div>                                    </div>                                {% endif %}                                                            </div>                        </div>                        <!-- END FORM-->                    </div>                    <div class="col-sm-12">                        <div class="form-actions">                            <div class="row">                                <div class="col-md-3 col-offset-sm-3">                                    <button type="submit" class="btn green btn-block add-user">Envoyer</button>                                </div>                                <div class="col-md-3">                                    <button type="button" class="btn default btn-block">Annuler</button>                                </div>                            </div>                        </div>                    </div>                    {{ form_end(form) }}                </div>            </div>        </div>    </div>{% endblock back_body %}{% block javascripts %}    {{ parent() }}    {% javascripts    'bundles/back/theme/assets/global/plugins/jquery-validation/js/jquery.validate.min.js'    'bundles/back/theme/assets/global/plugins/jquery-validation/js/additional-methods.min.js'    'bundles/back/theme/assets/global/plugins/select2/js/select2.full.min.js'    "bundles/back/theme/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js"    "bundles/back/js/plugins/validator.messages.js" %}    <script src="{{ asset_url }}"></script>    {% endjavascripts %}{% endblock %}