{% extends "BackBundle::layout.html.twig" %}{#Include CSS#}  {% block stylesheets %}      {{ parent() }}      {% stylesheets      'https://cdn.datatables.net/1.10.11/css/jquery.dataTables.min.css'      'bundles/back/css/tables.css'      'bundles/back/css/style.css'      filter='cssrewrite' %}      <link rel="stylesheet" href="{{ asset_url }}"/>      {% endstylesheets %}      <style type="text/css">      </style>  {% endblock stylesheets %}    {% block title %}    Liste des groupes | {{ parent() }}{% endblock %}{# HEADER #}    {% block header_breadcrumb %}        <li>            <span>Liste des groupes</span>        </li>    {% endblock header_breadcrumb %}{% block action_toolbar %}{% endblock action_toolbar %}    {#{% block page_title %}Clients{% endblock page_title %}#}    {#{% block page_sub_title %}#}        {#<small>Liste</small>{% endblock page_sub_title %}#}{% block back_body %}    <div class="row" id="">        <div class="col-md-12 col-sm-12 margin-top-20">            <!-- BEGIN Portlet PORTLET-->            <div class="portlet">                <div class="portlet-title ">                    <div class="caption font-green-sharp">                        <i class="icon-user font-green-sharp"></i>                        <span class="caption-subject bold uppercase"> Groupes</span>                        {% if groups is defined %}                            <span class="caption-helper">  Total: {{ groups | length }}</span>                        {% endif %}                                            </div>                    <div class="actions">                         <span class="font-black">  Type Groupe:</span>                         <span class="label label-sm label-danger"><i class="fa fa-lock"></i> Securit√©</span>                        <span class="label label-sm label-success"><i class="fa fa-cloud"></i>  Distribution</span>                        </div>                </div>                <div class="portlet-body">                    {% include('BackBundle:Includes:alert.html.twig') %}                    <div class="row">                        <div class="col-sm-12">                            <!-- BEGIN Row-->                            {#{{ dump(groups) }}#}                            {% if groups is defined %}                                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">                                    {% for tab in groups %}                                        {% for  key, group in tab %}                                            {% if group|length >1 %}                                                {% set groupTitle =ldap_service.getData(group,"cn") %}                                                {% set arrayMembers =ldap_service.getArray(group,"member") %}                                                <div class="panel panel-default">                                                    <div class="panel-heading" role="tab" id="group-{{ key }}">                                                        <a class="collapsed" role="button" data-toggle="collapse"                                                           data-parent="#accordion" href="#control-{{ key }}"                                                           aria-expanded="false"                                                           aria-controls="control-{{ key }}">                                                            <h6 class="panel-title">                                                                 {% if ldap_service.getData(group,"grouptype") == 2 %}                                                                    <span class="label label-sm label-success"><i class="fa fa-cloud fa-fw"></i></span>                                                                {% else %}                                                                    <span class="label label-sm label-danger"><i class="fa fa-lock fa-fw"></i></span>                                                                {% endif %}                                                                {{ groupTitle | capitalize }}                                                                {#{{ ldap_service.getData(group,"grouptype") }}#}                                                                                                                               <span class="badge badge-info pull-right">                                                                {% if arrayMembers| length >0 %}{{ arrayMembers| length -1 }}{% else %}0{% endif %}                                                            </span>                                                            </h6>                                                        </a>                                                    </div>                                                    <div id="control-{{ key }}" class="panel-collapse collapse"                                                         role="tabpanel"                                                         aria-labelledby="group-{{ key }}">                                                        <div class="panel-body">                                                            <table class="table table-striped table-hover table-header-fixed table-groups"                                                                   cellspacing="0" width="100%"                                                                   data-line="10">                                                                <thead>                                                                <tr>                                                                    <th class="col-md-2">Login</th>                                                                    <th class="col-md-3">Nom</th>                                                                    <th class="col-md-4">Email</th>                                                                    <th class="col-md-4">Ajouter</th>                                                                    <th class="col-md-1">Supprimer</th>                                                                </tr>                                                                </thead>                                                                <tbody>                                                                {#{{ dump(user) }}#}                                                                {% for  keyUser, userMemberDn in arrayMembers %}                                                                    {% if  keyUser != "count" or keyUser =="0" %}                                                                        {% set user =ldap_service.getUser(userMemberDn) %}                                                                        {% set userName = ldap_service.getOneData(user,"samaccountname") %}                                                                        <tr id="line-{{ groupTitle }}-{{ userName }}-{{ keyUser }}">                                                                            <td class="col-md-2">{{ userName }}</td>                                                                            <td class="col-md-3">{{ ldap_service.getOneData(user,"displayname") }}</td>                                                                            <td class="col-md-4">{{ ldap_service.getOneData(user,"userprincipalname") }}</td>                                                                            <td class="col-md-1 text-center">                                                                                <a href=""                                                                                   class="btn btn-success btn-xs add-users"                                                                                   id="{{ userName }}"                                                                                   data-action="add-group"                                                                                   data-groupName="{{ groupTitle }}"                                                                                   data-dnGroup="{{ ldap_service.getData(group,"distinguishedname") }}"                                                                                   data-dnUser="{{ userMemberDn }}"                                                                                   data-line="line-{{ groupTitle }}-{{ userName }}-{{ keyUser }}"><i                                                                                            class="glyphicon glyphicon-plus"></i>                                                                                    Add</a>                                                                            </td>                                                                            <td class="col-md-1 text-center">                                                                                <a href=""                                                                                   class="btn btn-xs red btn-outline btn-circle btn-remove"                                                                                   id="{{ userName }}"                                                                                   data-action="remove-group"                                                                                   data-groupName="{{ groupTitle }}"                                                                                   data-dnGroup="{{ ldap_service.getData(group,"distinguishedname") }}"                                                                                   data-dnUser="{{ userMemberDn }}"                                                                                   data-line="line-{{ groupTitle }}-{{ userName }}-{{ keyUser }}"><i                                                                                            class="fa fa-trash-o fa-fw"></i>                                                                                    Supp</a>                                                                            </td>                                                                        </tr>                                                                    {% endif %}                                                                {% endfor %}                                                                </tbody>                                                            </table>                                                        </div>                                                    </div>                                                </div>                                            {% endif %}                                        {% endfor %}                                    {% endfor %}                                </div>                                <!-- /.table-responsive -->                                <!-- /.panel-body -->                            {% endif %}                            {#{{ dump(customers) }}#}                            <!-- End Row-->                        </div>                    </div>                </div>            </div>        </div>    </div>{% endblock back_body %}{% block javascripts %}    {{ parent() }}    {% javascripts    "bundles/back/theme/assets/global/plugins/datatables/datatables.min.js"    "bundles/back/js/ad/dataTable.js"    "bundles/back/js/ad/app.js" %}    <script src="{{ asset_url }}"></script>    {% endjavascripts %}{% endblock %}