{% extends "BackBundle::layout.html.twig" %}{#Include CSS#}  {% block stylesheets %}      {{ parent() }}      {% stylesheets      'bundles/back/css/tables.css'      filter='cssrewrite' %}      <link rel="stylesheet" href="{{ asset_url }}"/>      {% endstylesheets %}  {% endblock stylesheets %}{% block title %}    Liste de clients | {{ parent() }}{% endblock %}{# HEADER #}    {% block header_breadcrumb %}        <li>            <span>Liste des commerciaux</span>        </li>    {% endblock header_breadcrumb %}{% block action_toolbar %}    <div class="btn-group pull-right">        <button type="button" class="btn green btn-sm btn-outline dropdown-toggle"                data-toggle="dropdown"> Actions            <i class="fa fa-angle-down"></i>        </button>        <ul class="dropdown-menu pull-right" role="menu">            <li>                <a href="#">                    <i class="icon-bell"></i> Liste de clients</a>            </li>            <li>                <a href="#">                    <i class="icon-shield"></i> Ajout un client</a>            </li>            <li class="divider"></li>            <li>                <a href="#">                    <i class="icon-bag"></i> Abonnements</a>            </li>        </ul>    </div>{% endblock action_toolbar %}    {% block page_title %}Customer{% endblock page_title %}    {% block page_sub_title %}        <small>Liste</small>{% endblock page_sub_title %}{% block back_body %}    <div class="row" id="">        <div class="col-md-12 col-sm-12 margin-top-20">            <!-- BEGIN Portlet PORTLET-->            <div class="portlet">                <div class="portlet-title">                    <div class="caption font-green-sharp">                        <i class="icon-earphones-alt font-green-sharp"></i>                        <span class="caption-subject bold uppercase"> Clients</span>                        {% if customers is defined %}                            <span class="caption-helper"> ( Total: {{ customers.getTotalItemCount }})</span>                        {% endif %}                    </div>                    <div class="actions">                        <a href="{{ path('back_customer_add') }}" title="Ajouter un customer"                           class="btn btn-sm btn-block green btn-outline"><span class="fa fa-plus"></span> Ajouter un                            customer</a>                    </div>                </div>                <div class="portlet-body">                    <div class="row">                        <!-- BEGIN Row-->                        <div class="col-sm-12">                            <div class="row">                                {% if customers is defined and customers %}                                    <div class="col-sm-2">                                        <div class="form-group">                                            <select class="form-control input-sm"                                                    onchange="location = this.value;">                                                <option value="" disabled>Trier par</option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.id','direction':'asc' })) }}"                                                        {% if customers.isSorted('customer.id') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>ID croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.id','direction':'desc' })) }}"                                                        {% if customers.isSorted('customer.id') and  customers.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>ID décroissant                                                </option>                                                 <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.lastName','direction':'asc' })) }}"                                                        {% if customers.isSorted('customer.lastName') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Nom croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.lastName','direction':'desc' })) }}"                                                        {% if customers.isSorted('customer.lastName') and  customers.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Nom décroissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.firstName','direction':'asc' })) }}"                                                        {% if customers.isSorted('customer.firstName') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Prénom croissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'customer.firstName','direction':'desc' })) }}"                                                        {% if customers.isSorted('customer.firstName') and  customers.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Prénom décroissant                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'company.name','direction':'asc' })) }}"                                                        {% if customers.isSorted('company.name') and  customers.getDirection() =="asc" %}                                                    selected="selected"                                                        {% endif %}>Société croissante                                                </option>                                                <option value="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                merge({'sort': 'company.name','direction':'desc' })) }}"                                                        {% if customers.isSorted('company.name') and  customers.getDirection() =="desc" %}                                                    selected="selected"                                                        {% endif %}>Société décroissante                                                </option>                                            </select>                                        </div>                                    </div>                                {% endif %}                                {% if pageLimited is defined and pageLimited %}                                    <div class="col-lg-2 col-md-2 col-sm-5 col-xs-12">                                        <div class="form-group">                                            {% set selected = app.request.query.get("limit") %}                                            <select name="limit" class="form-control input-sm"                                                    onchange="location = this.value;" autocomplete="off">                                                {#<option disabled {% if selected is null %}selected{% endif %}>#}                                                {#Nombre d'affichage#}                                                {#</option>#}                                                {% for limit in pageLimited %}                                                    <option value="{{ path(app.request.attributes.get('_route'),                                                    app.request.attributes.get('_route_params')  |merge(app.request.query.all)|                                                    merge({'limit': limit })) }}"                                                            {% if limit == selected %}selected{% endif %}>{{ limit }}                                                        par page                                                    </option>                                                {% endfor %}                                            </select>                                        </div>                                    </div>                                {% endif %}                                {#<div class="col-lg-2 col-md-2">#}                                {#{% if (app.request.query.get("sex")  or  app.request.query.get("q")) %}#}                                {#<a href="{{ path("back_customer_list") }}#}                                {#" class="btn btn-sm btn-block red">Réinitialiser le filtre</a>#}                                {#{% endif %}#}                                {#</div>#}                                <form class="search-form" role="search" method="get"                                      action="{{ path(app.request.attributes.get('_route')) }}">                                    <div class="col-lg-3 col-sm-3 col-xs-12 pull-right">                                        <div class="input-group">                                            <input class="form-control input-sm" placeholder="Rechercher..."                                                   name="q" value="{{ app.request.get('q') }}">                                            <span class="input-group-btn">                                                <button type="submit" class="btn green btn-sm"><i                                                            class="icon-magnifier"></i></button>                                            </span>                                        </div>                                    </div>                                </form>                            </div>                        </div>                        {% if customers is defined and customers %}                            <div class="col-sm-12">                                <table class="table table-condensed table-hover">                                    <thead>                                    <tr>                                        <th {% if customers.isSorted('customer.id') %} class="sorted col-sm-1"{% else %} class="col-sm-1" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'ID', 'customer.id') }}                                            {% if customers.isSorted('customer.id') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('customer.lastName') %} class="sorted col-sm-1"{% else %} class="col-sm-1" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Nom', 'customer.lastName') }}                                            {% if customers.isSorted('customer.lastName') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('customer.firstName') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Prénom', 'customer.firstName') }}                                            {% if customers.isSorted('customer.firstName') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th class="col-sm-1 text-center">Image</th>                                        <th {% if customers.isSorted('company.name') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Société', 'company.name') }}                                            {% if customers.isSorted('company.name') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('commercial.lastName') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Commercial', 'commercial.lastName') }}                                            {% if customers.isSorted('commercial.lastName') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th {% if customers.isSorted('customer.created') %} class="sorted col-sm-2"{% else %} class="col-sm-2" {% endif %} >                                            {{ knp_pagination_sortable(customers, 'Création', 'customer.created') }}                                            {% if customers.isSorted('customer.created') %}                                                {% if customers.getDirection() =="asc" %}                                                    <i class="fa fa-sort-asc"></i>                                                {% elseif customers.getDirection() =="desc" %}                                                    <i class="fa fa-sort-desc"></i>                                                {% endif %}                                            {% else %}                                                <i class="fa fa-sort"></i>                                            {% endif %}                                        </th>                                        <th class="col-sm-2 text-center">Actions</th>                                    </tr>                                    </thead>                                    <tbody>                                    {% for customer in customers %}                                        <tr id="line_customer_{{ customer.id }}">                                            <td>{{ customer.id | e }}</td>                                            <td>{{ customer.lastName | upper | e }}</td>                                            <td>{{ customer.firstName | e }}</td>                                            <td class="td-image text-center">                                                {% if customer.imagePortrait is defined and customer.imagePortrait %}                                                    <img src="{{ asset(customer.imagePortrait) }}"                                                         alt="{{ customer.firstName | e }} {{ customer.lastName }}"                                                         title="{{ customer.firstName | e }} {{ customer.lastName }}">                                                {% else %}                                                    <img src="{{ asset('assets/img/default.png') }}"                                                         alt="{{ customer.firstName | e }} {{ customer.lastName }}"                                                         title="{{ customer.firstName | e }} {{ customer.lastName }}">                                                {% endif %}                                            </td>                                            <td>                                                {% if customer.company.name is defined and customer.company.name %}                                                    {{ customer.company.name }}                                                {% else %}                                                    --                                                {% endif %}                                            </td>                                            <td>                                                {% if customer.commercial.lastName is defined and customer.commercial.lastName %}                                                    {{ customer.commercial.lastName | upper | e }}                                                {% endif %}                                                {% if customer.commercial.firstName is defined and customer.commercial.firstName %}                                                    {{ customer.commercial.firstName | capitalize | e }}                                                {% endif %}                                            </td>                                            <td>{{ customer.created | date("d/m/Y") }}</td>                                            <td class="col-sm-1 text-center">                                                <a href="" class="btn btn-xs blue btn-outline"><i                                                            class="fa fa-eye"></i></a>                                                <a href="{{ path('back_customer_edit', {'slug':customer.id}) }}"                                                   class="btn btn-xs blue btn-outline"><i                                                            class="fa fa-edit"></i></a>                                                <a href="" class="btn btn-xs red btn-outline btn_remove"                                                   data-toggle="modal"                                                   data-title="{{ customer.firstName | e }} {{ customer.lastName }}"                                                   data-id="customer_{{ customer.id }}"                                                ><i class="fa fa-trash"></i></a>                                            </td>                                        </tr>                                    {% else %}                                        <tr class="text-center">                                            <td colspan="7"><h4 class="margin-top-20">Aucun customer trouvé.</h4></td>                                        </tr>                                    {% endfor %}                                    </tbody>                                </table>                                <div class="text-center">                                    {{ knp_pagination_render(customers) }}                                </div>                            </div>                        {% endif %}                        <!-- End Row-->                    </div>                </div>            </div>        </div>    </div>    <div class="modal fade" tabindex="-1" id="remove_modal" role="dialog"         data-attention-animation="false">        <div class="modal-dialog" role="document">            <!-- Modal content-->            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                aria-hidden="true">&times;</span></button>                    <h4 class="modal-title red">Suppression customere </h4>                </div>                <div class="modal-body">                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-outline btn-default" data-dismiss="modal"><i                                class="fa fa-remove fa-fw"></i>Non                    </button>                    <button type="button" class="btn btn-danger btn-ok-delete" data-dismiss="modal">                        <i class="fa fa-trash-o fa-fw"></i>Oui                    </button>                </div>            </div>        </div>    </div>{% endblock back_body %}{% block javascripts %}    {{ parent() }}    <script type="text/javascript">        $(function () {            $("table.table thead tr th").click(function (e) {                var href = $(this).find("a").attr("href");                if (href) {                    location.href = href;                }            })        });    </script>{% endblock %}