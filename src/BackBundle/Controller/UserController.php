<?phpnamespace BackBundle\Controller;use Symfony\Bundle\FrameworkBundle\Controller\Controller;use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;use Symfony\Component\HttpFoundation\Request;use Symfony\Component\HttpFoundation\Response;use BackBundle\Entity\User;/** * Class UserController * @package BackBundle\Controller */class UserController extends Controller{    /**     * @Route("/user/profile", name="back_user_profile")     * @return Response     */    public function indexAction()    {        return $this->render('BackBundle:User:profile.html.twig');    }    /**     * @Route("/user-action/reset/password", name="back_user_reset_password")     */    public function resetByEmailAction()    {//        die("A finir");        return $this->render('BackBundle:User:email.html.twig');    }    /**     * @Route("/user-action/check-username-or-email", name="back_user_check_username_or_email" ,options = {"expose"=true})     * @param Request $request     * @return Response     */    public function checkEmailValidAction(Request $request)    {        if ($request->isXmlHttpRequest()) {//            $em = $this->getDoctrine()->getManager();            $usernameOrEmail = $request->get("user");            $userManager = $this->container->get('fos_user.user_manager');            $user = $userManager->findUserByUsernameOrEmail($usernameOrEmail);            return new Response (json_encode(array('type' => "success",                "response" => ($user === null) ? false : true,                "message" => "OK")), 200,                ['Content-Type' => 'application/json']            );        }        return new Response (json_encode(array('type' => "error", response => false, "message" => "Error: isXmlHttpRequest")), 200,            ['Content-Type' => 'application/json']        );    }}