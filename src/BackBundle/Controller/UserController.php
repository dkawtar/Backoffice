<?phpnamespace BackBundle\Controller;use Symfony\Bundle\FrameworkBundle\Controller\Controller;use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;use Symfony\Component\HttpFoundation\Request;use Symfony\Component\HttpFoundation\Response;use BackBundle\Entity\User;/** * Class UserController * @package BackBundle\Controller */class UserController extends Controller{    /**     * @Route("/user", name="back_user")     */    public function indexAction()    {        return $this->render('BackBundle:Pages:index.html.twig');    }    /**     * @Route("/user-action/reset/password", name="back_user_reset_password")     */    public function resetByEmailAction()    {//        die("A finir");                return $this->render('BackBundle:User:email.html.twig');    }    /**     * @Route("/user-action/check-email", name="back_user_check_email" ,options = {"expose"=true})     * @param Request $request     * @return Response     */    public function checkEmailValidAction(Request $request)    {        if ($request->isXmlHttpRequest()) {            $em = $this->getDoctrine()->getManager();            $email = $request->get("email");            $response = $em->getRepository("BackBundle:User")->findOneByEmailCanonical($email);            return new response (json_encode(array('type' => "success",                "response" => ($response === null) ? false : true,                "message" => "OK")), 200,                ['Content-Type' => 'application/json']            );        }        return new response (json_encode(array('type' => "error", response => false, "message" => "Error: isXmlHttpRequest")), 200,            ['Content-Type' => 'application/json']        );    }}